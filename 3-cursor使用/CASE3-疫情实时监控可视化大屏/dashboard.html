<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¦™æ¸¯ç–«æƒ…å®æ—¶ç›‘æ§å¤§å±</title>
    <!-- å¼•å…¥ECharts -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <!-- å¼•å…¥é¦™æ¸¯åœ°å›¾æ•°æ® -->
    <script src="hongkong-geo.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            background-color: #0f1c3c;
            color: #fff;
            overflow-x: hidden;
        }
        
        .container {
            width: 100%;
            min-height: 100vh;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        /* é¡¶éƒ¨æ ‡é¢˜å’Œæ•°æ®æŒ‡æ ‡ */
        .header {
            height: 100px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .title {
            font-size: 32px;
            color: #fff;
            text-shadow: 0 0 10px rgba(0, 199, 255, 0.5);
            margin-bottom: 15px;
        }
        
        .data-overview {
            display: flex;
            justify-content: space-around;
            width: 100%;
        }
        
        .data-item {
            background: rgba(6, 30, 93, 0.5);
            border: 1px solid rgba(0, 199, 255, 0.3);
            border-radius: 5px;
            padding: 10px 20px;
            text-align: center;
            width: 18%;
        }
        
        .data-item-title {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .data-item-value {
            font-size: 24px;
            font-weight: bold;
            margin-top: 5px;
        }
        
        .confirmed {
            color: #ff6a84;
        }
        
        .cured {
            color: #4cd964;
        }
        
        .death {
            color: #909399;
        }
        
        .new-confirmed {
            color: #ff9f40;
        }
        
        .active {
            color: #36a3ff;
        }
        
        /* ä¸­éƒ¨å›¾è¡¨åŒºåŸŸ */
        .charts-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        
        .chart-wrapper {
            background: rgba(6, 30, 93, 0.5);
            border: 1px solid rgba(0, 199, 255, 0.3);
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 20px;
            position: relative;
            backdrop-filter: blur(5px);
        }
        
        /* åœ°å›¾å›¾è¡¨ç‰¹æ®Šæ ·å¼ */
        #geo-distribution {
            background: radial-gradient(ellipse at center, rgba(30, 58, 74, 0.8) 0%, rgba(15, 28, 60, 0.9) 100%);
            border-radius: 5px;
            border: 1px solid rgba(44, 95, 122, 0.5);
        }
        
        .chart-title {
            font-size: 16px;
            color: #fff;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
        }
        
        .chart-title span {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }
        
        .chart-half-width {
            width: 49%;
            height: 300px;
        }
        
        .chart-full-width {
            width: 100%;
            height: 300px;
        }
        
        .chart {
            width: 100%;
            height: calc(100% - 30px);
        }
        
        /* åº•éƒ¨å›¾è¡¨åŒºåŸŸ */
        .bottom-charts {
            display: flex;
            justify-content: space-between;
        }
        
        .bottom-chart {
            width: 49%;
            height: 250px;
        }
        
        /* å“åº”å¼è°ƒæ•´ */
        @media screen and (max-width: 1200px) {
            .chart-half-width, .bottom-chart {
                width: 100%;
            }
            
            .data-item {
                width: 30%;
                margin-bottom: 10px;
            }
            
            .data-overview {
                flex-wrap: wrap;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- é¡¶éƒ¨æ ‡é¢˜å’Œæ•°æ®æŒ‡æ ‡ -->
        <div class="header">
            <div class="title">é¦™æ¸¯ç–«æƒ…å®æ—¶ç›‘æ§å¤§å±</div>
            <div class="data-overview">
                <div class="data-item">
                    <div class="data-item-title">ç´¯è®¡ç¡®è¯Š</div>
                    <div class="data-item-value confirmed">12,345</div>
                </div>
                <div class="data-item">
                    <div class="data-item-title">æ–°å¢ç¡®è¯Š</div>
                    <div class="data-item-value new-confirmed">123</div>
                </div>
                <div class="data-item">
                    <div class="data-item-title">ç°æœ‰ç¡®è¯Š</div>
                    <div class="data-item-value active">2,345</div>
                </div>
                <div class="data-item">
                    <div class="data-item-title">ç´¯è®¡æ²»æ„ˆ</div>
                    <div class="data-item-value cured">9,876</div>
                </div>
                <div class="data-item">
                    <div class="data-item-title">ç´¯è®¡æ­»äº¡</div>
                    <div class="data-item-value death">124</div>
                </div>
            </div>
        </div>
        
        <!-- ä¸­éƒ¨å›¾è¡¨åŒºåŸŸ -->
        <div class="charts-container">
            <!-- æ¯æ—¥æ–°å¢ä¸ç´¯è®¡ç¡®è¯Šæ•°æ® -->
            <div class="chart-wrapper chart-half-width">
                <div class="chart-title">æ¯æ—¥æ–°å¢ä¸ç´¯è®¡ç¡®è¯Šè¶‹åŠ¿ <span>å•ä½: äºº</span></div>
                <div id="daily-trend" class="chart"></div>
            </div>
            
            <!-- åœ°ç†åˆ†å¸ƒå›¾ -->
            <div class="chart-wrapper chart-half-width">
                <div class="chart-title">
                    ğŸ—ºï¸ é¦™æ¸¯å„åŒºç–«æƒ…åˆ†å¸ƒåœ°å›¾ 
                    <span style="font-size: 10px; opacity: 0.8;">
                        æ”¯æŒç¼©æ”¾å¹³ç§» | é¼ æ ‡æ‚¬åœæŸ¥çœ‹è¯¦æƒ…
                    </span>
                </div>
                <div id="geo-distribution" class="chart"></div>
            </div>
            
            <!-- è¶‹åŠ¿åˆ†æå›¾ -->
            <div class="chart-wrapper chart-half-width">
                <div class="chart-title">ç–«æƒ…å¢é•¿ç‡å˜åŒ–è¶‹åŠ¿ <span>å•ä½: %</span></div>
                <div id="growth-rate" class="chart"></div>
            </div>
            
            <!-- å„åŒºåŸŸç¡®è¯Šæ’å -->
            <div class="chart-wrapper chart-half-width">
                <div class="chart-title">å„åŒºåŸŸç¡®è¯Šæ’å <span>å•ä½: äºº</span></div>
                <div id="district-ranking" class="chart"></div>
            </div>
        </div>
        
        <!-- åº•éƒ¨å›¾è¡¨åŒºåŸŸ -->
        <div class="bottom-charts">
            <!-- å¹´é¾„åˆ†å¸ƒ -->
            <div class="chart-wrapper bottom-chart">
                <div class="chart-title">ç¡®è¯Šç—…ä¾‹å¹´é¾„åˆ†å¸ƒ <span>å•ä½: äºº</span></div>
                <div id="age-distribution" class="chart"></div>
            </div>
            
            <!-- åŒ»ç–—èµ„æºåˆ†å¸ƒ -->
            <div class="chart-wrapper bottom-chart">
                <div class="chart-title">åŒ»ç–—èµ„æºä½¿ç”¨æƒ…å†µ <span>å•ä½: %</span></div>
                <div id="medical-resources" class="chart"></div>
            </div>
        </div>
    </div>
    
    <script>
        // åˆå§‹åŒ–æ‰€æœ‰å›¾è¡¨
        document.addEventListener('DOMContentLoaded', function() {
            // æ¨¡æ‹Ÿæ•°æ® - å®é™…é¡¹ç›®ä¸­åº”ä»APIè·å–
            const mockData = {
                dailyData: {
                    dates: ['3/15', '3/16', '3/17', '3/18', '3/19', '3/20', '3/21', '3/22', '3/23', '3/24', '3/25'],
                    newCases: [120, 132, 101, 134, 90, 230, 210, 120, 132, 101, 134],
                    totalCases: [5000, 5132, 5233, 5367, 5457, 5687, 5897, 6017, 6149, 6250, 6384]
                },
                districts: ['ä¸­è¥¿åŒº', 'æ¹¾ä»”åŒº', 'ä¸œåŒº', 'å—åŒº', 'æ²¹å°–æ—ºåŒº', 'æ·±æ°´åŸ—åŒº', 'ä¹é¾™åŸåŒº', 'é»„å¤§ä»™åŒº', 'è§‚å¡˜åŒº', 'è‘µé’åŒº', 'èƒæ¹¾åŒº', 'å±¯é—¨åŒº', 'å…ƒæœ—åŒº', 'åŒ—åŒº', 'å¤§åŸ”åŒº', 'æ²™ç”°åŒº', 'è¥¿è´¡åŒº', 'ç¦»å²›åŒº'],
                districtData: [320, 302, 301, 334, 390, 330, 320, 302, 301, 334, 390, 330, 320, 302, 301, 334, 390, 330],
                growthRates: [5.2, 4.8, 3.2, 4.5, 2.8, 7.5, 6.8, 3.9, 4.2, 3.3, 4.3],
                ageGroups: ['0-9å²', '10-19å²', '20-29å²', '30-39å²', '40-49å²', '50-59å²', '60-69å²', '70å²ä»¥ä¸Š'],
                ageDistribution: [50, 150, 420, 380, 290, 320, 410, 580],
                medicalResources: {
                    categories: ['æ™®é€šç—…åºŠ', 'éš”ç¦»ç—…åºŠ', 'ICUç—…åºŠ', 'å‘¼å¸æœº', 'åŒ»æŠ¤äººå‘˜'],
                    usage: [85, 92, 78, 65, 90]
                }
            };
            
            // å…¶å®ƒå›¾è¡¨å¯ä»¥ç›´æ¥åˆå§‹åŒ–
            initDailyTrendChart(mockData);
            initGrowthRateChart(mockData);
            initDistrictRankingChart(mockData);
            initAgeDistributionChart(mockData);
            initMedicalResourcesChart(mockData);
            
            // åœ°å›¾å¿…é¡»ç­‰GeoJSONæ³¨å†Œå¥½å†åˆå§‹åŒ–
            window.addEventListener('hk-map-ready', function() {
                console.log('ğŸ—ºï¸ æ¥æ”¶åˆ°åœ°å›¾å°±ç»ªäº‹ä»¶ï¼Œå¼€å§‹åˆå§‹åŒ–åœ°å›¾...');
                initGeoDistributionChart(mockData);
                console.log('ğŸ—ºï¸ åœ°å›¾åˆå§‹åŒ–å®Œæˆ');
            });
            
            // ç›‘å¬åœ°å›¾åŠ è½½é”™è¯¯äº‹ä»¶
            window.addEventListener('hk-map-error', function(event) {
                console.error('âŒ åœ°å›¾åŠ è½½å¤±è´¥:', event.detail);
                alert('åœ°å›¾æ•°æ®åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥810000_full.jsonæ–‡ä»¶æ˜¯å¦å­˜åœ¨');
            });
            
            // æ·»åŠ è¶…æ—¶æœºåˆ¶ï¼Œå¦‚æœ5ç§’å†…åœ°å›¾æ²¡æœ‰åŠ è½½æˆåŠŸï¼Œæ˜¾ç¤ºæç¤º
            setTimeout(function() {
                if (!window.mapLoaded) {
                    console.warn('âš ï¸ åœ°å›¾åŠ è½½è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–810000_full.jsonæ–‡ä»¶');
                }
            }, 5000);
        });
        
        // æ¯æ—¥æ–°å¢ä¸ç´¯è®¡ç¡®è¯Šè¶‹åŠ¿å›¾
        function initDailyTrendChart(data) {
            const chartDom = document.getElementById('daily-trend');
            const myChart = echarts.init(chartDom);
            
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                legend: {
                    data: ['æ–°å¢ç¡®è¯Š', 'ç´¯è®¡ç¡®è¯Š'],
                    textStyle: {
                        color: '#fff'
                    },
                    top: 0,
                    right: 10
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: [
                    {
                        type: 'category',
                        data: data.dailyData.dates,
                        axisLine: {
                            lineStyle: {
                                color: 'rgba(255,255,255,0.3)'
                            }
                        },
                        axisLabel: {
                            color: 'rgba(255,255,255,0.7)'
                        }
                    }
                ],
                yAxis: [
                    {
                        type: 'value',
                        name: 'æ–°å¢ç¡®è¯Š',
                        splitLine: {
                            lineStyle: {
                                color: 'rgba(255,255,255,0.1)'
                            }
                        },
                        axisLine: {
                            lineStyle: {
                                color: 'rgba(255,255,255,0.3)'
                            }
                        },
                        axisLabel: {
                            color: 'rgba(255,255,255,0.7)'
                        }
                    },
                    {
                        type: 'value',
                        name: 'ç´¯è®¡ç¡®è¯Š',
                        splitLine: {
                            show: false
                        },
                        axisLine: {
                            lineStyle: {
                                color: 'rgba(255,255,255,0.3)'
                            }
                        },
                        axisLabel: {
                            color: 'rgba(255,255,255,0.7)'
                        }
                    }
                ],
                series: [
                    {
                        name: 'æ–°å¢ç¡®è¯Š',
                        type: 'bar',
                        data: data.dailyData.newCases,
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: '#ff9f43' },
                                { offset: 1, color: '#ff6b6b' }
                            ])
                        }
                    },
                    {
                        name: 'ç´¯è®¡ç¡®è¯Š',
                        type: 'line',
                        yAxisIndex: 1,
                        data: data.dailyData.totalCases,
                        symbolSize: 8,
                        symbol: 'circle',
                        smooth: true,
                        lineStyle: {
                            width: 3,
                            color: '#36a3ff'
                        },
                        itemStyle: {
                            color: '#36a3ff'
                        }
                    }
                ]
            };
            
            myChart.setOption(option);
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
        
        // åœ°ç†åˆ†å¸ƒå›¾
        function initGeoDistributionChart(data) {
            const chartDom = document.getElementById('geo-distribution');
            const myChart = echarts.init(chartDom);
            
            // å‡†å¤‡åœ°å›¾æ•°æ®
            const mapData = [];
            const districtMap = {
                'ä¸­è¥¿åŒº': 'ä¸­è¥¿åŒº',
                'æ¹¾ä»”åŒº': 'æ¹¾ä»”åŒº',
                'ä¸œåŒº': 'ä¸œåŒº',
                'å—åŒº': 'å—åŒº',
                'æ²¹å°–æ—ºåŒº': 'æ²¹å°–æ—ºåŒº',
                'æ·±æ°´åŸ—åŒº': 'æ·±æ°´åŸ—åŒº',
                'ä¹é¾™åŸåŒº': 'ä¹é¾™åŸåŒº',
                'é»„å¤§ä»™åŒº': 'é»„å¤§ä»™åŒº',
                'è§‚å¡˜åŒº': 'è§‚å¡˜åŒº',
                'è‘µé’åŒº': 'è‘µé’åŒº',
                'èƒæ¹¾åŒº': 'èƒæ¹¾åŒº',
                'å±¯é—¨åŒº': 'å±¯é—¨åŒº',
                'å…ƒæœ—åŒº': 'å…ƒæœ—åŒº',
                'åŒ—åŒº': 'åŒ—åŒº',
                'å¤§åŸ”åŒº': 'å¤§åŸ”åŒº',
                'æ²™ç”°åŒº': 'æ²™ç”°åŒº',
                'è¥¿è´¡åŒº': 'è¥¿è´¡åŒº',
                'ç¦»å²›åŒº': 'ç¦»å²›åŒº'
            };
            
            // åŒ¹é…åœ°åŒºåç§°å¹¶åˆ›å»ºåœ°å›¾æ•°æ®
            data.districts.forEach((district, index) => {
                const matchedDistrict = Object.keys(districtMap).find(key => 
                    district.includes(key) || key.includes(district)
                );
                
                if (matchedDistrict) {
                    mapData.push({
                        name: matchedDistrict,
                        value: data.districtData[index]
                    });
                } else {
                    console.log('æœªåŒ¹é…åˆ°åœ°åŒº:', district);
                }
            });
            
            // ä¸ºæ²¡æœ‰æ•°æ®çš„åŒºåŸŸæ·»åŠ é»˜è®¤å€¼
            Object.keys(districtMap).forEach(district => {
                if (!mapData.find(item => item.name === district)) {
                    mapData.push({
                        name: district,
                        value: 0
                    });
                }
            });
            
            // è®¡ç®—æœ€å¤§å€¼ç”¨äºè§†è§‰æ˜ å°„
            const maxValue = Math.max(...data.districtData, 1);
            
            // é¦™æ¸¯åœ°å›¾é…ç½® - å‚è€ƒç™¾åº¦åœ°å›¾é£æ ¼
            const option = {
                backgroundColor: 'transparent',
                tooltip: {
                    trigger: 'item',
                    formatter: function(params) {
                        return `<div style="padding: 8px; background: rgba(0,0,0,0.8); border-radius: 4px; color: #fff; font-size: 12px;">
                                    <div style="font-weight: bold; margin-bottom: 4px;">${params.name}</div>
                                    <div>ç¡®è¯Šäººæ•°: <span style="color: #ff6b6b;">${params.value || 0}</span> äºº</div>
                                </div>`;
                    },
                    backgroundColor: 'transparent',
                    borderWidth: 0
                },
                visualMap: {
                    min: 0,
                    max: maxValue,
                    left: 15,
                    bottom: 20,
                    text: ['é«˜é£é™©', 'ä½é£é™©'],
                    calculable: false,
                    inRange: {
                        color: [
                            '#313695',    // æ·±è“è‰² - æ— ç¡®è¯Š
                            '#4575b4',    // è“è‰² - ä½ç¡®è¯Š
                            '#74add1',    // æµ…è“è‰²
                            '#abd9e9',    // å¾ˆæµ…è“è‰²
                            '#e0f3f8',    // ç™½è‰² - ä¸­ç­‰
                            '#fee090',    // æµ…é»„è‰²
                            '#fdae61',    // æ©™è‰²
                            '#f46d43',    // æ©™çº¢è‰²
                            '#d73027',    // çº¢è‰²
                            '#a50026'     // æ·±çº¢è‰² - é«˜ç¡®è¯Š
                        ]
                    },
                    textStyle: {
                        color: '#fff',
                        fontSize: 11
                    },
                    itemWidth: 12,
                    itemHeight: 80
                },
                geo: {
                    map: 'HK',
                    roam: true,
                    zoom: 1.3,
                    center: [114.15, 22.35],
                    aspectScale: 1,
                    itemStyle: {
                        areaColor: '#1e3a4a',
                        borderColor: '#2c5f7a',
                        borderWidth: 1,
                        shadowColor: 'rgba(0, 0, 0, 0.5)',
                        shadowBlur: 10,
                        shadowOffsetX: 2,
                        shadowOffsetY: 2
                    },
                    emphasis: {
                        itemStyle: {
                            areaColor: '#2c5f7a'
                        }
                    }
                },
                series: [
                    // èƒŒæ™¯åœ°å›¾å±‚
                    {
                        type: 'map',
                        map: 'HK',
                        geoIndex: 0,
                        aspectScale: 1,
                        roam: false,
                        zoom: 1.3,
                        center: [114.15, 22.35],
                        silent: true,
                        itemStyle: {
                            areaColor: '#1e3a4a',
                            borderColor: '#2c5f7a',
                            borderWidth: 1
                        },
                        data: Object.keys(districtMap).map(name => ({
                            name: name,
                            value: 0,
                            itemStyle: {
                                areaColor: '#1e3a4a'
                            }
                        }))
                    },
                    // æ•°æ®å±•ç¤ºå±‚
                    {
                        name: 'é¦™æ¸¯å„åŒºç¡®è¯Šäººæ•°',
                        type: 'map',
                        map: 'HK',
                        aspectScale: 1,
                        roam: true,
                        zoom: 1.3,
                        center: [114.15, 22.35],
                        emphasis: {
                            label: {
                                show: true,
                                color: '#fff',
                                fontSize: 12,
                                fontWeight: 'bold',
                                textShadowColor: 'rgba(0, 0, 0, 0.8)',
                                textShadowBlur: 4
                            },
                            itemStyle: {
                                areaColor: '#ffd04b',
                                borderColor: '#fff',
                                borderWidth: 2,
                                shadowColor: 'rgba(255, 208, 75, 0.8)',
                                shadowBlur: 15,
                                shadowOffsetX: 0,
                                shadowOffsetY: 0
                            }
                        },
                        select: {
                            itemStyle: {
                                areaColor: '#ff6b6b'
                            }
                        },
                        data: mapData,
                        itemStyle: {
                            borderColor: 'rgba(255, 255, 255, 0.8)',
                            borderWidth: 1.5,
                            shadowColor: 'rgba(0, 0, 0, 0.3)',
                            shadowBlur: 8,
                            shadowOffsetX: 2,
                            shadowOffsetY: 2
                        },
                        label: {
                            show: true,
                            color: '#fff',
                            fontSize: 10,
                            fontWeight: 'bold',
                            textShadowColor: 'rgba(0, 0, 0, 0.8)',
                            textShadowBlur: 3,
                            formatter: function(params) {
                                return params.name.replace('åŒº', '');
                            }
                        }
                    },
                    // æµ·åŸŸèƒŒæ™¯æ•ˆæœ
                    {
                        name: 'æµ·åŸŸ',
                        type: 'effectScatter',
                        coordinateSystem: 'geo',
                        data: [
                            [113.85, 22.15, 1],
                            [114.45, 22.25, 1],
                            [114.25, 22.55, 1]
                        ],
                        symbolSize: function(val) {
                            return 4;
                        },
                        itemStyle: {
                            color: 'rgba(70, 130, 180, 0.6)'
                        },
                        rippleEffect: {
                            brushType: 'stroke',
                            color: 'rgba(70, 130, 180, 0.3)',
                            scale: 1.5,
                            period: 4
                        },
                        silent: true
                    }
                ]
            };
            
            myChart.setOption(option);
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', function() {
                myChart.resize();
            });
            
            // æ·»åŠ ç‚¹å‡»äº‹ä»¶
            myChart.on('click', function(params) {
                if (params.componentType === 'series' && params.seriesIndex === 1) {
                    console.log('ç‚¹å‡»äº†åŒºåŸŸ:', params.name, 'ç¡®è¯Šäººæ•°:', params.value);
                }
            });
        }
        
        // å¢é•¿ç‡å˜åŒ–è¶‹åŠ¿å›¾
        function initGrowthRateChart(data) {
            const chartDom = document.getElementById('growth-rate');
            const myChart = echarts.init(chartDom);
            
            const option = {
                tooltip: {
                    trigger: 'axis'
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: data.dailyData.dates,
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.3)'
                        }
                    },
                    axisLabel: {
                        color: 'rgba(255,255,255,0.7)'
                    }
                },
                yAxis: {
                    type: 'value',
                    name: 'å¢é•¿ç‡(%)',
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.1)'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.3)'
                        }
                    },
                    axisLabel: {
                        color: 'rgba(255,255,255,0.7)'
                    }
                },
                series: [
                    {
                        name: 'å¢é•¿ç‡',
                        type: 'line',
                        data: data.growthRates,
                        smooth: true,
                        lineStyle: {
                            width: 3,
                            color: '#5470c6'
                        },
                        areaStyle: {
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                { offset: 0, color: 'rgba(84,112,198,0.5)' },
                                { offset: 1, color: 'rgba(84,112,198,0.1)' }
                            ])
                        },
                        markLine: {
                            data: [
                                { type: 'average', name: 'å¹³å‡å€¼' }
                            ],
                            lineStyle: {
                                color: '#ff6b6b'
                            },
                            label: {
                                color: '#fff'
                            }
                        }
                    }
                ]
            };
            
            myChart.setOption(option);
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
        
        // å„åŒºåŸŸç¡®è¯Šæ’åå›¾
        function initDistrictRankingChart(data) {
            const chartDom = document.getElementById('district-ranking');
            const myChart = echarts.init(chartDom);
            
            // æ’åºæ•°æ®
            const sortedData = data.districts.map((district, index) => {
                return {
                    name: district,
                    value: data.districtData[index]
                };
            }).sort((a, b) => b.value - a.value);
            
            const sortedDistricts = sortedData.map(item => item.name);
            const sortedValues = sortedData.map(item => item.value);
            
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.1)'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.3)'
                        }
                    },
                    axisLabel: {
                        color: 'rgba(255,255,255,0.7)'
                    }
                },
                yAxis: {
                    type: 'category',
                    data: sortedDistricts.slice(0, 10), // åªæ˜¾ç¤ºå‰10å
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.3)'
                        }
                    },
                    axisLabel: {
                        color: 'rgba(255,255,255,0.7)'
                    }
                },
                series: [
                    {
                        name: 'ç¡®è¯Šäººæ•°',
                        type: 'bar',
                        data: sortedValues.slice(0, 10), // åªæ˜¾ç¤ºå‰10å
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [
                                { offset: 0, color: '#83bff6' },
                                { offset: 0.5, color: '#188df0' },
                                { offset: 1, color: '#188df0' }
                            ])
                        },
                        label: {
                            show: true,
                            position: 'right',
                            color: '#fff'
                        }
                    }
                ]
            };
            
            myChart.setOption(option);
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
        
        // å¹´é¾„åˆ†å¸ƒå›¾
        function initAgeDistributionChart(data) {
            const chartDom = document.getElementById('age-distribution');
            const myChart = echarts.init(chartDom);
            
            const option = {
                tooltip: {
                    trigger: 'item',
                    formatter: '{b}: {c}äºº ({d}%)'
                },
                legend: {
                    orient: 'vertical',
                    right: 10,
                    top: 'center',
                    textStyle: {
                        color: '#fff'
                    }
                },
                series: [
                    {
                        name: 'å¹´é¾„åˆ†å¸ƒ',
                        type: 'pie',
                        radius: ['40%', '70%'],
                        center: ['40%', '50%'],
                        avoidLabelOverlap: false,
                        itemStyle: {
                            borderRadius: 10,
                            borderColor: '#0f1c3c',
                            borderWidth: 2
                        },
                        label: {
                            show: false,
                            position: 'center'
                        },
                        emphasis: {
                            label: {
                                show: true,
                                fontSize: '18',
                                fontWeight: 'bold',
                                color: '#fff'
                            }
                        },
                        labelLine: {
                            show: false
                        },
                        data: data.ageGroups.map((age, index) => {
                            return {
                                name: age,
                                value: data.ageDistribution[index]
                            };
                        })
                    }
                ]
            };
            
            myChart.setOption(option);
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
        
        // åŒ»ç–—èµ„æºä½¿ç”¨æƒ…å†µå›¾
        function initMedicalResourcesChart(data) {
            const chartDom = document.getElementById('medical-resources');
            const myChart = echarts.init(chartDom);
            
            const option = {
                tooltip: {
                    trigger: 'axis',
                    axisPointer: {
                        type: 'shadow'
                    },
                    formatter: '{b}: {c}%'
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'value',
                    max: 100,
                    splitLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.1)'
                        }
                    },
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.3)'
                        }
                    },
                    axisLabel: {
                        color: 'rgba(255,255,255,0.7)',
                        formatter: '{value}%'
                    }
                },
                yAxis: {
                    type: 'category',
                    data: data.medicalResources.categories,
                    axisLine: {
                        lineStyle: {
                            color: 'rgba(255,255,255,0.3)'
                        }
                    },
                    axisLabel: {
                        color: 'rgba(255,255,255,0.7)'
                    }
                },
                series: [
                    {
                        name: 'ä½¿ç”¨ç‡',
                        type: 'bar',
                        data: data.medicalResources.usage,
                        itemStyle: {
                            color: function(params) {
                                // æ ¹æ®æ•°å€¼è®¾ç½®ä¸åŒé¢œè‰²
                                if (params.value > 90) {
                                    return '#ff6b6b'; // çº¢è‰²
                                } else if (params.value > 70) {
                                    return '#feca57'; // é»„è‰²
                                } else {
                                    return '#1dd1a1'; // ç»¿è‰²
                                }
                            }
                        },
                        label: {
                            show: true,
                            position: 'right',
                            color: '#fff',
                            formatter: '{c}%'
                        }
                    }
                ]
            };
            
            myChart.setOption(option);
            
            // å“åº”çª—å£å¤§å°å˜åŒ–
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }
    </script>
</body>
</html> 