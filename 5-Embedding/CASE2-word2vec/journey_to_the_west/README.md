# 西游记 Word2Vec 人物相似度分析

基于《西游记》文本的中文分词和Word2Vec词向量训练，用于计算小说中人物相似度的Node.js项目。

## 项目概述

本项目实现了一个完整的中文文本处理和词向量分析流程：
- 使用中文分词工具对《西游记》进行分词处理
- 训练Word2Vec模型生成词向量
- 计算人物之间的语义相似度

## 技术栈

- **Node.js** (ES Module方式)
- **nodejieba** - 中文分词
- **word2vec** - 词向量训练
- **余弦相似度** - 相似度计算

## 项目结构

```
journey_to_the_west/
├── input/
│   └── journey_to_the_west.txt    # 原始文本数据
├── output/                        # 所有输出文件
│   ├── segmented_output.txt       # 详细分词结果
│   ├── training_data.txt          # Word2Vec训练数据
│   └── model.txt                  # 训练好的词向量模型
├── segment-text.js                # 分词程序
├── word2vec-similarity.js         # 完整流程程序
├── 提示词.txt                      # 项目需求说明
└── README.md                      # 项目说明文档
```

## 实现步骤

### Step 1: 中文分词
使用nodejieba对《西游记》文本进行中文分词：
- 按标点符号分句
- 过滤短词和标点符号
- 生成分词统计报告

### Step 2: 语料预处理
将分词结果转化为Word2Vec训练格式：
- 每行一个句子，词语用空格分隔
- 过滤低频词汇
- 生成训练数据文件

### Step 3: Word2Vec训练
训练词向量模型：
- 向量维度：100
- 窗口大小：5
- 最小词频：5
- 迭代次数：5

### Step 4: 相似度计算
使用余弦相似度计算词语相似度：
- 支持任意两个词语的相似度计算
- 提供最相似词语查询功能

## 使用方法

### 环境准备

确保已安装Node.js和相关依赖：

```bash
# 在Learn-AI-Sample根目录下安装依赖
npm install nodejieba word2vec @tensorflow/tfjs-node
```

### 运行分词程序

```bash
node segment-text.js
```

**输出文件：**
- `output/segmented_output.txt` - 包含详细的分词结果、统计信息和高频词汇
- `output/training_data.txt` - Word2Vec训练数据格式

### 运行完整流程

```bash
node word2vec-similarity.js
```

**功能：**
- 自动完成分词、训练、相似度计算全流程
- 输出人物相似度分析结果
- 生成词向量模型文件

## 分析结果

### 数据统计
- **处理句子数：** 26,497句
- **总词数：** 132,689个
- **唯一词汇数：** 18,869个
- **词汇表大小：** 4,736个（过滤后）

### 人物相似度示例
- **孙悟空 与 八戒：** 0.6718
- **孙悟空 与 行者：** 0.7219（更高，符合预期）

### 与孙悟空最相似的词汇
1. 天将 (0.9527)
2. 因此 (0.9520)
3. 至今 (0.9494)
4. 请旨 (0.9484)
5. 妖猴 (0.9479)

## 输出文件说明

### segmented_output.txt
包含完整的分词分析结果：
- 分词统计信息
- 每句的原文和分词对照
- 高频词汇排行榜（前50个）

### training_data.txt
Word2Vec训练用的简化格式：
- 每行一个句子
- 词语之间用空格分隔
- 已过滤标点和短词

### model.txt
训练好的Word2Vec模型：
- 词汇表大小：4,736个词
- 向量维度：100维
- 可用于相似度计算和词语类比

## 技术特点

1. **中文处理优化**：使用nodejieba进行准确的中文分词
2. **数据预处理**：完整的文本清洗和格式化流程
3. **模型训练**：使用经典的Word2Vec算法训练词向量
4. **相似度计算**：实现余弦相似度计算，支持NaN值处理
5. **结果可视化**：提供详细的统计报告和分析结果

## 扩展功能

- 支持自定义相似度查询
- 可调整Word2Vec训练参数
- 支持其他文本数据集
- 可扩展为Web服务接口

## 依赖说明

项目依赖定义在根目录的`package.json`中：
- `nodejieba`: 中文分词库
- `word2vec`: Word2Vec模型训练
- `@tensorflow/tfjs-node`: 机器学习支持

## 注意事项

- 确保输入文件编码为UTF-8
- 模型训练需要一定时间，请耐心等待
- 所有中间文件输出到`output`文件夹
- 建议在有足够内存的环境下运行

---

*该项目基于《西游记》文本进行中文自然语言处理和词向量分析，适用于中文文本挖掘和语义分析研究。*